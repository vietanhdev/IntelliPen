<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntelliPen Overlay Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: #f8fafc;
        }
        
        .test-section h2 {
            margin-top: 0;
            color: #1e293b;
        }
        
        textarea, input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
        }
        
        textarea {
            min-height: 120px;
        }
        
        .demo-text {
            background: #fff3cd;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-style: italic;
        }
        
        .instructions {
            background: #d1ecf1;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: #0c5460;
        }
        
        .instructions ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .instructions li {
            margin: 5px 0;
        }
        
        .highlight {
            background: #fef3c7;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .error-text {
            color: #dc2626;
            font-weight: 500;
        }
        
        .success-text {
            color: #059669;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <h1>üñãÔ∏è IntelliPen Overlay & Right-Click Test</h1>
    
    <div class="instructions">
        <h3>How to Test IntelliPen Features:</h3>
        <ul>
            <li><strong>Right-click menu:</strong> Select any text below and right-click to see IntelliPen options</li>
            <li><strong>Grammar overlay:</strong> Type in the text fields and look for the üñãÔ∏è indicator</li>
            <li><strong>Context menu:</strong> Try "Check Grammar & Style", "Improve Writing", "Change Tone"</li>
            <li><strong>Popup interface:</strong> Click the IntelliPen extension icon in the toolbar</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>Text Input Field</h2>
        <p>Type some text with intentional errors to test grammar checking:</p>
        <input type="text" placeholder="Try typing: 'i seen alot of people there is many problems'" 
               value="i seen alot of people there is many problems">
        <div class="demo-text">
            <strong>Demo text to select:</strong> "This sentence have some grammar errors that need to be fixed."
        </div>
    </div>

    <div class="test-section">
        <h2>Textarea Field</h2>
        <p>Larger text area for testing writing improvements:</p>
        <textarea placeholder="Write a longer text here to test writing suggestions...">The meeting was very good and we discussed alot of important things. There is many topics that we need to address. i think we should have another meeting soon to discuss this further.</textarea>
        <div class="demo-text">
            <strong>Text to select and right-click:</strong> "The quick brown fox jumps over the lazy dog. This is a very simple sentence that could be improved with better vocabulary and more interesting structure."
        </div>
    </div>

    <div class="test-section">
        <h2>Content Editable Area</h2>
        <p>Editable div for testing different content types:</p>
        <div contenteditable="true" style="border: 1px solid #d1d5db; padding: 12px; border-radius: 6px; min-height: 100px; background: white;">
            Click here and start typing. You can also select this existing text and right-click to see IntelliPen options. This text contains some errors that should be detected by the grammar checker.
        </div>
    </div>

    <div class="test-section">
        <h2>Test Different Tones</h2>
        <p>Select the text below and use right-click menu to test tone changes:</p>
        <div class="demo-text">
            <strong>Casual text:</strong> "Hey, what's up? I think we should totally do this thing because it's gonna be awesome!"
        </div>
        <div class="demo-text">
            <strong>Formal text:</strong> "I am writing to inform you that the quarterly report has been completed and is ready for your review."
        </div>
        <div class="demo-text">
            <strong>Technical text:</strong> "The API endpoint returns a JSON response containing user data and authentication tokens."
        </div>
    </div>

    <div class="test-section">
        <h2>Summary & Translation Test</h2>
        <p>Select the longer text below and test summarization:</p>
        <div class="demo-text">
            <strong>Long text for summarization:</strong> "Artificial intelligence has revolutionized many aspects of modern life, from the way we search for information online to how we interact with our devices. Machine learning algorithms can now process vast amounts of data to identify patterns and make predictions that were previously impossible. Natural language processing has enabled computers to understand and generate human language with remarkable accuracy. Computer vision systems can recognize objects, faces, and scenes in images and videos. These technologies are being applied in healthcare, finance, transportation, entertainment, and countless other fields. As AI continues to advance, it promises to bring even more transformative changes to society, though it also raises important questions about privacy, employment, and the future of human-machine interaction."
        </div>
    </div>

    <div class="test-section">
        <h2>Status Information</h2>
        <p id="status">Loading IntelliPen status...</p>
        <button onclick="testOverlay()" style="padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Test Overlay Manually
        </button>
        <button onclick="checkExtensionStatus()" style="padding: 8px 16px; background: #059669; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">
            Check Extension Status
        </button>
    </div>

    <script>
        // Test functions
        function testOverlay() {
            const activeElement = document.activeElement;
            if (activeElement && (activeElement.tagName === 'TEXTAREA' || activeElement.tagName === 'INPUT' || activeElement.contentEditable === 'true')) {
                // Simulate showing overlay
                console.log('Testing overlay for element:', activeElement);
                
                // Try to trigger the overlay via message
                if (typeof chrome !== 'undefined' && chrome.runtime) {
                    chrome.runtime.sendMessage({
                        type: 'SHOW_WRITING_OVERLAY',
                        data: { action: 'show-overlay' }
                    }).catch(error => {
                        console.log('Extension not available:', error);
                        updateStatus('Extension not loaded or not available');
                    });
                } else {
                    updateStatus('Chrome extension API not available');
                }
            } else {
                alert('Please click on a text field first, then try again.');
            }
        }

        function checkExtensionStatus() {
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                chrome.runtime.sendMessage({
                    type: 'GET_EXTENSION_STATUS'
                }).then(response => {
                    if (response && response.success) {
                        updateStatus(`Extension Status: ${response.data.initialized ? 'Ready' : 'Loading'} | Active Sessions: ${response.data.activeSessions}`);
                    } else {
                        updateStatus('Extension not responding');
                    }
                }).catch(error => {
                    updateStatus('Extension not available: ' + error.message);
                });
            } else {
                updateStatus('Chrome extension API not available - make sure you\'re testing with the extension loaded');
            }
        }

        function updateStatus(message) {
            const statusElement = document.getElementById('status');
            statusElement.textContent = message;
            
            if (message.includes('Ready') || message.includes('available')) {
                statusElement.className = 'success-text';
            } else if (message.includes('not') || message.includes('Error')) {
                statusElement.className = 'error-text';
            } else {
                statusElement.className = '';
            }
        }

        // Check status on page load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkExtensionStatus, 1000);
        });

        // Add some interactivity to demonstrate text field detection
        document.addEventListener('focus', (e) => {
            if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'INPUT' || e.target.contentEditable === 'true') {
                console.log('Text field focused:', e.target);
                updateStatus('Text field focused - IntelliPen should be active');
            }
        }, true);

        // Log right-click events
        document.addEventListener('contextmenu', (e) => {
            const selection = window.getSelection().toString();
            if (selection) {
                console.log('Right-click with selection:', selection.substring(0, 50) + '...');
                updateStatus(`Right-clicked with selected text: "${selection.substring(0, 30)}..."`);
            }
        });
    </script>
</body>
</html>