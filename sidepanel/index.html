<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IntelliPen</title>
  <link rel="stylesheet" href="index.css">
</head>

<body>
  <div class="sidepanel-container">
    <!-- Header -->
    <header class="sidepanel-header">
      <div class="header-title">
        <div class="title-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z" fill="currentColor" opacity="0.9" />
            <path
              d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
              fill="currentColor" />
          </svg>
        </div>
        <h1>IntelliPen</h1>
      </div>
      <button id="themeToggle" class="btn-icon" title="Toggle theme">
        <svg class="theme-icon-light" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" />
          <path
            d="M12 2v2m0 16v2M20 12h2M2 12h2m14.364-6.364l1.414-1.414M5.636 5.636L4.222 4.222m15.556 15.556l-1.414-1.414M5.636 18.364l-1.414 1.414"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
        <svg class="theme-icon-dark" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
    </header>

    <!-- Navigation Tabs -->
    <nav class="navigation-tabs">
      <button class="nav-tab active" data-screen="editor">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z" fill="currentColor" opacity="0.9" />
          <path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
            fill="currentColor" />
        </svg>
        <span class="nav-label">Editor</span>
      </button>
      <button class="nav-tab" data-screen="translator">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
          <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
            stroke="currentColor" stroke-width="2" />
        </svg>
        <span class="nav-label">Translator</span>
      </button>
      <button class="nav-tab" data-screen="meeting">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="9" y="3" width="6" height="11" rx="3" stroke="currentColor" stroke-width="2" />
          <path d="M5 11c0 3.866 3.134 7 7 7s7-3.134 7-7M12 18v3M9 21h6" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" />
        </svg>
        <span class="nav-label">Meeting</span>
      </button>
    </nav>

    <!-- Tone Selection Modal -->
    <div class="modal-overlay hidden" id="toneModalOverlay">
      <div class="modal-dialog">
        <div class="modal-header">
          <h3>Select Writing Tone</h3>
          <button class="btn-icon modal-close" id="closeToneModal">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p class="modal-description">Choose how you'd like to adjust the tone of your text</p>
          <div class="tone-options">
            <button class="tone-option" data-tone="formal">
              <svg class="tone-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" />
                <path d="M9 14h6M9 10h1.5M15 10h-1.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
              <span class="tone-name">Formal</span>
              <span class="tone-desc">Professional and polished</span>
            </button>
            <button class="tone-option" data-tone="casual">
              <svg class="tone-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" />
                <path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" />
              </svg>
              <span class="tone-name">Casual</span>
              <span class="tone-desc">Relaxed and conversational</span>
            </button>
            <button class="tone-option" data-tone="professional">
              <svg class="tone-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="6" width="16" height="14" rx="2" stroke="currentColor" stroke-width="2" />
                <path d="M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2M12 11v4" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" />
              </svg>
              <span class="tone-name">Professional</span>
              <span class="tone-desc">Business-appropriate</span>
            </button>
            <button class="tone-option" data-tone="friendly">
              <svg class="tone-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z" stroke="currentColor"
                  stroke-width="2" stroke-linecap="round" />
              </svg>
              <span class="tone-name">Friendly</span>
              <span class="tone-desc">Warm and approachable</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Translator Settings Modal -->
    <div class="modal-overlay hidden" id="translatorSettingsOverlay">
      <div class="modal-dialog">
        <div class="modal-header">
          <h3>Translator Settings</h3>
          <button class="btn-icon modal-close" id="closeTranslatorSettings">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p class="modal-description">Configure quick translation shortcuts</p>
          <div class="settings-options">
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-title">Double-click to Translate</div>
                <div class="setting-desc">Double-click any word in the source text to translate it instantly</div>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="doubleClickTranslate">
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-title">Shift + Click to Translate</div>
                <div class="setting-desc">Hold Shift and click any word to translate it</div>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="shiftClickTranslate">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Editor Screen -->
    <div class="screen" id="editorScreen">
      <section class="toolbar">
        <div class="toolbar-group">
          <button class="toolbar-btn" id="newDocBtn" title="New Document">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
          <button class="toolbar-btn" id="openDocBtn" title="Open Document">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"
                fill="currentColor" opacity="0.9" />
            </svg>
          </button>
          <button class="toolbar-btn" id="saveDocBtn" title="Save Document">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4z" fill="currentColor"
                opacity="0.9" />
              <circle cx="12" cy="16" r="3" fill="white" />
              <path d="M15 3v4H7V3" stroke="white" stroke-width="1.5" />
            </svg>
          </button>
        </div>
        <div class="toolbar-divider"></div>
        <div class="toolbar-group">
          <button class="toolbar-btn" id="undoBtn" title="Undo">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 14L4 9l5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
              <path d="M20 20v-7a4 4 0 0 0-4-4H4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </button>
          <button class="toolbar-btn" id="redoBtn" title="Redo">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15 14l5-5-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
              <path d="M4 20v-7a4 4 0 0 1 4-4h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </button>
        </div>
        <div class="toolbar-divider"></div>
        <div class="toolbar-group">
          <label class="grammar-check-toggle">
            <input type="checkbox" id="grammarCheckbox">
            <svg class="checkbox-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 7h16M4 12h16M4 17h10" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              <circle cx="18" cy="17" r="4" fill="currentColor" />
              <path d="M16 17l1.5 1.5 3-3" stroke="white" stroke-width="2" stroke-linecap="round" />
            </svg>
            <span class="checkbox-label">Check Grammar</span>
          </label>
          <button class="toolbar-btn toolbar-btn-with-text" id="improveWritingBtn" title="Improve Writing">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 3v18M3 12h18M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" />
              <circle cx="12" cy="12" r="2" fill="currentColor" />
            </svg>
            <span class="toolbar-btn-text">Improve Writing</span>
          </button>
          <button class="toolbar-btn toolbar-btn-with-text" id="changeToneBtn" title="Change Tone">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 7h12M4 12h12M4 17h8M17 15l3 3-3 3M20 18h-4" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" />
            </svg>
            <span class="toolbar-btn-text">Change Tone</span>
          </button>
        </div>
      </section>

      <section class="editor-content">
        <div class="editor-wrapper">
          <div class="editor-area" id="editorArea" contenteditable="true" spellcheck="false"
            data-placeholder="Start writing or paste your text here..."></div>
        </div>

        <!-- Proofreader Popover -->
        <div id="proofreadPopover" popover="manual">
          <h4 id="popoverErrorType">Error Type</h4>
          <div class="popover-content">
            <div class="popover-explanation" id="popoverExplanation"></div>
            <div class="popover-suggestion">
              <strong>Suggestion:</strong>
              <button type="button" class="correction-suggestion" id="popoverCorrectionBtn"></button>
            </div>
          </div>
        </div>

        <section class="suggestions-panel hidden" id="suggestionsPanel">
          <div class="suggestions-header">
            <h3>Writing Suggestions</h3>
            <button class="btn-icon" id="closeSuggestionsBtn">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
          </div>
          <div class="suggestions-content" id="suggestionsContent">
            <div class="placeholder">
              <svg class="placeholder-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                <path d="M12 16v-4M12 8v.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
              <p>Select text or click a button to get suggestions</p>
            </div>
          </div>
        </section>
      </section>

      <footer class="editor-stats">
        <div class="stat-item">
          <span class="stat-label">Words:</span>
          <span class="stat-value" id="wordCount">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Characters:</span>
          <span class="stat-value" id="charCount">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Reading Time:</span>
          <span class="stat-value" id="readingTime">0 min</span>
        </div>
        <div class="stat-item grammar-status" id="grammarStatus" style="display: none;">
          <span class="grammar-status-icon">
            <svg class="spinner" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" opacity="0.25"/>
              <path d="M12 2a10 10 0 0110 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="stat-value" id="grammarStatusText">Checking grammar...</span>
        </div>
      </footer>
    </div>

    <!-- Translator Screen -->
    <div class="screen" id="translatorScreen" style="display: none;">
      <section class="translator-controls">
        <div class="language-selector">
          <div class="language-box">
            <label for="sourceLanguage">From</label>
            <select id="sourceLanguage" class="select">
              <option value="auto">Detect Language</option>
              <option value="en">English</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="it">Italian</option>
              <option value="pt">Portuguese</option>
              <option value="ru">Russian</option>
              <option value="ja">Japanese</option>
              <option value="ko">Korean</option>
              <option value="zh">Chinese</option>
              <option value="ar">Arabic</option>
              <option value="hi">Hindi</option>
              <option value="vi">Vietnamese</option>
              <option value="th">Thai</option>
            </select>
          </div>

          <button class="swap-btn" id="swapLanguages" title="Swap Languages">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7 16V4M7 4L3 8M7 4l4 4M17 8v12M17 20l4-4M17 20l-4-4" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" />
            </svg>
          </button>

          <div class="language-box">
            <label for="targetLanguage">To</label>
            <select id="targetLanguage" class="select">
              <option value="en">English</option>
              <option value="es" selected>Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="it">Italian</option>
              <option value="pt">Portuguese</option>
              <option value="ru">Russian</option>
              <option value="ja">Japanese</option>
              <option value="ko">Korean</option>
              <option value="zh">Chinese</option>
              <option value="ar">Arabic</option>
              <option value="hi">Hindi</option>
              <option value="vi">Vietnamese</option>
              <option value="th">Thai</option>
            </select>
          </div>

          <button class="btn-icon" id="translatorSettingsBtn" title="Translator Settings">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 15a3 3 0 100-6 3 3 0 000 6z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </section>

      <section class="translation-content">
        <div class="translation-panel source-panel">
          <div class="panel-header">
            <span class="detected-language" id="detectedLanguage">Auto</span>
            <div class="panel-actions">
              <button class="btn-icon" id="clearSource" title="Clear">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z" fill="currentColor" opacity="0.9" />
                  <path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" fill="currentColor" />
                </svg>
              </button>
              <button class="btn-icon" id="speakSource" title="Read Aloud">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M3 9v6h4l5 5V4L7 9H3z" fill="currentColor" opacity="0.9" />
                  <path d="M15.54 8.46a5 5 0 010 7.07M18.36 5.64a9 9 0 010 12.73" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" />
                </svg>
              </button>
            </div>
          </div>
          <textarea id="sourceText" class="translation-textarea" placeholder="Enter text to translate..."
            spellcheck="false"></textarea>
          <div class="char-count">
            <span id="sourceCharCount">0</span> / 5000
          </div>
        </div>

        <div class="translation-panel target-panel">
          <div class="panel-header">
            <span class="translation-status" id="translationStatus"></span>
            <div class="panel-actions">
              <button class="btn-icon" id="copyTranslation" title="Copy">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="9" y="9" width="11" height="11" rx="2" stroke="currentColor" stroke-width="2" />
                  <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" />
                </svg>
              </button>
              <button class="btn-icon" id="speakTarget" title="Read Aloud">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M3 9v6h4l5 5V4L7 9H3z" fill="currentColor" opacity="0.9" />
                  <path d="M15.54 8.46a5 5 0 010 7.07M18.36 5.64a9 9 0 010 12.73" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" />
                </svg>
              </button>
            </div>
          </div>
          <div id="targetText" class="translation-output">
            <div class="placeholder">
              <svg class="placeholder-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                  stroke="currentColor" stroke-width="2" />
              </svg>
              <p>Translation will appear here</p>
            </div>
          </div>
        </div>
      </section>

      <footer class="translator-footer">
        <button class="btn btn-primary flex-1" id="translateBtn">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
            <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
              stroke="currentColor" stroke-width="2" />
          </svg>
          <span>Translate</span>
        </button>
        <button class="btn btn-secondary" id="saveTranslation">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4z" fill="currentColor"
              opacity="0.9" />
            <circle cx="12" cy="16" r="3" fill="white" />
          </svg>
          <span>Save</span>
        </button>
      </footer>
    </div>

    <!-- Meeting Screen -->
    <div class="screen" id="meetingScreen" style="display: none;">
      <!-- Permission Banner -->
      <div class="permission-banner hidden" id="permissionBanner">
        <svg class="permission-banner-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z" stroke="currentColor"
            stroke-width="2" stroke-linejoin="round" />
          <path d="M12 8v4M12 16h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
        <div class="permission-banner-content">
          <h4 class="permission-banner-title">Microphone Access Required</h4>
          <p class="permission-banner-message">IntelliPen needs microphone access to record meetings. All processing
            happens locally on your device.</p>
          <div class="permission-banner-actions">
            <button class="btn btn-primary btn-sm" id="requestPermissionBtn">Grant Access</button>
            <button class="btn btn-text btn-sm" id="dismissBannerBtn">Dismiss</button>
          </div>
        </div>
      </div>

      <section class="meeting-controls">
        <div class="device-selection">
          <div class="device-group">
            <label for="microphoneSelect" class="device-label">
              <svg class="device-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="9" y="3" width="6" height="11" rx="3" stroke="currentColor" stroke-width="2" />
                <path d="M5 11c0 3.866 3.134 7 7 7s7-3.134 7-7M12 18v3M9 21h6" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" />
              </svg>
              <span>Microphone</span>
            </label>
            <select id="microphoneSelect" class="select">
              <option value="">Loading devices...</option>
            </select>
            <button class="device-test-btn btn-icon" id="testMicBtn" title="Test Microphone">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 9v6h4l5 5V4L7 9H3z" fill="currentColor" opacity="0.9" />
                <path d="M15.54 8.46a5 5 0 010 7.07" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
          </div>

          <div class="device-group">
            <label for="speakerSelect" class="device-label">
              <svg class="device-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 9v6h4l5 5V4L7 9H3z" fill="currentColor" opacity="0.9" />
                <path d="M15.54 8.46a5 5 0 010 7.07M18.36 5.64a9 9 0 010 12.73" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" />
              </svg>
              <span>Speaker</span>
            </label>
            <select id="speakerSelect" class="select">
              <option value="">Loading devices...</option>
            </select>
            <button class="device-test-btn btn-icon" id="testSpeakerBtn" title="Test Speaker">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 5v14l11-7L8 5z" fill="currentColor" />
              </svg>
            </button>
          </div>
        </div>

        <div class="control-group">
          <button class="record-btn" id="recordBtn">
            <svg class="record-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="4" fill="currentColor" />
            </svg>
            <span class="record-text">Start Recording</span>
          </button>
          <div class="recording-status" id="recordingStatus">
            <span class="status-dot"></span>
            <span class="status-text">Ready to record</span>
            <span class="duration" id="recordingDuration">00:00</span>
          </div>
        </div>

        <div class="language-selection">
          <label for="recognitionLanguage" class="language-label">
            <svg class="language-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
              <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                stroke="currentColor" stroke-width="2" />
            </svg>
            <span>Recognition Language</span>
          </label>
          <select id="recognitionLanguage" class="select">
            <option value="en-US">English (US)</option>
            <option value="en-GB">English (UK)</option>
            <option value="es-ES">Spanish (Spain)</option>
            <option value="fr-FR">French (France)</option>
            <option value="de-DE">German</option>
            <option value="it-IT">Italian</option>
            <option value="pt-BR">Portuguese (Brazil)</option>
            <option value="ja-JP">Japanese</option>
            <option value="ko-KR">Korean</option>
            <option value="zh-CN">Chinese (Simplified)</option>
          </select>
        </div>

        <div class="meeting-info">
          <div class="info-item">
            <span class="info-label">Session:</span>
            <span class="info-value" id="sessionId">None</span>
          </div>
          <div class="info-item">
            <span class="info-label">Speakers:</span>
            <span class="info-value" id="speakerCount">0</span>
          </div>
          <div class="info-item">
            <span class="info-label">Status:</span>
            <span class="info-value" id="recognitionStatus">Ready</span>
          </div>
        </div>
      </section>

      <!-- Meeting Tabs -->
      <nav class="meeting-tabs">
        <button class="meeting-tab active" data-tab="transcript">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="4" y="4" width="16" height="16" rx="2" stroke="currentColor" stroke-width="2" />
            <path d="M8 9h8M8 12h8M8 15h5" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
          <span>Live Transcript</span>
        </button>
        <button class="meeting-tab" data-tab="analysis">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 3v18M3 12h18M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" />
            <circle cx="12" cy="12" r="2" fill="currentColor" />
          </svg>
          <span>Meeting Analysis</span>
        </button>
      </nav>

      <!-- Live Transcript Tab -->
      <section class="transcript-section meeting-tab-content" id="transcriptTab">
        <div class="section-header">
          <h2>Live Transcript</h2>
          <div class="transcript-controls">
            <button class="btn-icon" id="clearTranscript" title="Clear Transcript">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z" fill="currentColor" opacity="0.9" />
                <path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" fill="currentColor" />
              </svg>
            </button>
            <button class="btn-icon" id="exportTranscript" title="Export Transcript">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 11l3-3 3 3M12 14V8M20 16v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2" stroke="currentColor"
                  stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
          </div>
        </div>

        <div class="transcript-container" id="transcriptContainer">
          <div class="placeholder">
            <svg class="placeholder-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="9" y="3" width="6" height="11" rx="3" stroke="currentColor" stroke-width="2" />
              <path d="M5 11c0 3.866 3.134 7 7 7s7-3.134 7-7M12 18v3M9 21h6" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" />
            </svg>
            <p>Start recording to see live transcript</p>
            <p class="placeholder-subtitle">All processing happens locally on your device</p>
          </div>
        </div>
      </section>

      <!-- Meeting Analysis Tab -->
      <section class="analysis-section meeting-tab-content" id="analysisTab" style="display: none;">
        <div class="md-toolbar">
          <h2 class="md-toolbar-title">Analysis Results</h2>
          <div class="md-toolbar-actions">
            <button class="md-icon-button" id="regenerateAnalysis" title="Regenerate Analysis">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 3v18M3 12h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                  opacity="0.5" />
                <circle cx="12" cy="12" r="2" fill="currentColor" />
              </svg>
            </button>
            <button class="md-icon-button" id="exportAnalysis" title="Export Analysis">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 11l3-3 3 3M12 14V8M20 16v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2" stroke="currentColor"
                  stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
          </div>
        </div>

        <div class="md-content">
          <!-- Empty State -->
          <div class="md-empty-state" id="analysisEmptyState">
            <svg class="md-empty-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
            <h3 class="md-empty-title">No Analysis Yet</h3>
            <p class="md-empty-description">Record a meeting to generate AI-powered analysis with summaries, action
              items, and more.</p>
          </div>

          <!-- Analysis Cards (hidden initially) -->
          <div class="md-analysis-cards" id="analysisCards" style="display: none;">
            <!-- Executive Summary -->
            <div class="md-card md-elevation-2">
              <div class="md-card-header">
                <svg class="md-card-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <h3 class="md-card-title">Executive Summary</h3>
              </div>
              <div class="md-card-content" id="executiveSummary">
                <p class="md-loading-text">Generating summary...</p>
              </div>
            </div>

            <!-- Action Items -->
            <div class="md-card md-elevation-2">
              <div class="md-card-header">
                <svg class="md-card-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <h3 class="md-card-title">Action Items</h3>
              </div>
              <div class="md-card-content md-card-content-list" id="actionItems">
                <p class="md-loading-text">Extracting action items...</p>
              </div>
            </div>

            <!-- Key Decisions -->
            <div class="md-card md-elevation-2">
              <div class="md-card-header">
                <svg class="md-card-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <h3 class="md-card-title">Key Decisions</h3>
              </div>
              <div class="md-card-content md-card-content-list" id="keyDecisions">
                <p class="md-loading-text">Identifying key decisions...</p>
              </div>
            </div>

            <!-- Follow-up Email -->
            <div class="md-card md-elevation-2">
              <div class="md-card-header">
                <svg class="md-card-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <h3 class="md-card-title">Follow-up Email Draft</h3>
              </div>
              <div class="md-card-content md-card-content-email" id="emailDraft">
                <p class="md-loading-text">Generating follow-up email...</p>
              </div>
              <div class="md-card-actions">
                <button class="md-button md-button-text" id="copyEmail">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="9" y="9" width="11" height="11" rx="2" stroke="currentColor" stroke-width="2" />
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" />
                  </svg>
                  <span>Copy</span>
                </button>
                <button class="md-button md-button-text" id="editEmail">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z" fill="currentColor" opacity="0.9" />
                    <path
                      d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
                      fill="currentColor" />
                  </svg>
                  <span>Edit</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="privacy-footer">
        <div class="privacy-indicator">
          <svg class="privacy-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="5" y="11" width="14" height="10" rx="2" stroke="currentColor" stroke-width="2" />
            <path d="M8 11V7a4 4 0 018 0v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            <circle cx="12" cy="16" r="2" fill="currentColor" />
          </svg>
          <span class="privacy-text">All processing happens locally on your device</span>
        </div>
      </footer>
    </div>
  </div>

  <script src="../src/icons/icon-library.js"></script>
  <script src="../src/components/ui-components.js"></script>
  <script src="../src/ai-apis/AIAPIManager.js"></script>
  <script src="../src/editor/RichTextProofreader.js"></script>
  <script src="../src/editor/EditorAIFeatures.js"></script>
  <script src="../src/meeting/MeetingAIFeatures.js"></script>
  <script src="index.js"></script>
</body>

</html>